<div>
    <div class="bg-light lter b-b wrapper-md" ng-init="app.settings.asideFixed = true;app.settings.headerFixed = true;">
        <div class="row">
            <div class="col-xs-12 col-sm-7 col-md-7 col-lg-7">
                <h1 class="m-n font-thin h3"><img src="img/icon/jalase.png" class="icnSize">
                    عنوان جلسه : ( {{thisWeekly.title}} )
                    <span class="m-n font-thin h4">تاریخ :</span><span class="m-n font-thin h4" dir="ltr"> {{thisSessionDate}}</span>
                </h1>
            </div>
            <div class="col-xs-12 col-sm-5 col-md-5 col-lg-5">
                <div class="col-xs-12 col-sm-12 col-md-12 col-lg-6" style="float: left">
                    <div class="panel-body">
                        <button data-toggle="modal" data-target="#history" type="button"
                                ng-click="selectLessonTeacher()"
                                style="width: 100%" class="btn btn-addon , btn btn-default"><i
                                class="fa fa-history"></i>مشاهده
                            جلسات پیشین
                        </button>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <div class="line line-dashed  line-lg pull-in"></div>
    <div class="container">
        <div class="main-wrapper">
            <div class="row">
                <div class="container panel v-middle media-middle text-center align-items-center">
                    <br>
                    <div class="panel panel-default" style="width: 100%;">
                        <div class="panel-heading">
                            <h4 class="panel-title">
                                <div class="row">
                                    <div class="col-xs-12 col-sm-6 col-md-6 col-lg-6">
                                        <div class="col-xs-6 col-sm-6 col-md-6 col-lg-6"
                                             style="float: right;margin-top: 10px;">
                                            <div class="panel-body">
                                                <p style="width: 100%"><span>کلاس:</span>&nbsp;<span>{{thisWeekly.classTitle}}</span>
                                                </p>
                                            </div>
                                        </div>
                                        <div class="col-xs-6 col-sm-6 col-md-6 col-lg-6">
                                            <div class="panel-body" style="margin-top: 10px;">
                                                <p style="width: 100%">
                                                    <span>درس:</span>&nbsp;<span>{{thisWeekly.lessonTitle}}</span>
                                                </p>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="col-xs-12 col-sm-6 col-md-6 col-lg-6">
                                        <div class="panel-body">
                                            <input st-search="" id="gsearch2" ng-model="gsearch"
                                                   class="form-control"
                                                   placeholder="جستجو ..." type="text"/>
                                        </div>
                                    </div>
                                </div>
                            </h4>
                        </div>
                        <div id="collapse1" class="panel-collapse collapse in">
                            <div class="panel-body">
                                <div class="row">
                                    <div align="center">
                                        <div ng-if="studentClass.length == '0'">
                                            <img src="img/notFound(404).png" style="width: 25% ; height: auto"
                                                 align="center"/>
                                            <h5 id="txtNoOrd">متاسفانه دانش آموزی در
                                                این رشته یافت نشد !</h5>
                                            <a style="color: black;text-decoration: underline"
                                               href="#/app/page/Class_Ctrl">بازگشت
                                                به
                                                لیست
                                                کلاس ها</a>
                                        </div>
                                        <div style="width: 100%" ng-if="studentClass.length != '0'">
                                            <div class="table-responsive">
                                                <table class="table table-striped" id="tblExport">
                                                    <table class="table table-striped" id="mytable">
                                                        <thead>
                                                        <tr>
                                                            <th class="v-middle  media-middle text-center" scope="col"
                                                                style="width: 5%">ردیف
                                                            </th>
                                                            <th class="v-middle  media-middle text-center" scope="col"
                                                                style="width: 10%">تصویر
                                                            </th>
                                                            <th class="v-middle  media-middle text-center" scope="col"
                                                                style="width: 20%">نام و نام خانوادگی
                                                            </th>
                                                            <th class="v-middle  media-middle text-center" scope="col"
                                                                style="width: 20%">کد دانش آموز
                                                            </th>
                                                            <!--نمره عادی یا توصیفی-->
                                                            <th class="v-middle  media-middle text-center" scope="col"
                                                                style="width: 30%" ng-show="!isPodemany">نمره
                                                            </th>
                                                            <!--نمره پودمانی-->
                                                            <th class="v-middle  media-middle text-center" scope="col"
                                                                style="width: 10%" ng-show="isPodemany">پودمان
                                                            </th>
                                                            <th class="v-middle  media-middle text-center" scope="col"
                                                                style="width: 10%" ng-show="isPodemany">مستمر
                                                            </th>
                                                            <th class="v-middle  media-middle text-center" scope="col"
                                                                style="width: 10%" ng-show="isPodemany">شایستگی
                                                            </th>
                                                            <th class="v-middle  media-middle text-center" scope="col"
                                                                style="width: 15%">وضعیت
                                                            </th>
                                                        </tr>
                                                        </thead>
                                                        <tbody>
                                                        <tr ng-repeat="mymodel in studentClass | filter : gsearch"
                                                            data-toggle="modal"
                                                            data-target="#myModal"
                                                            ng-click="selectStu(mymodel.index)">
                                                            <td scope="row" class="v-middle  media-middle text-center">
                                                                {{mymodel.studentid}}
                                                            </td>
                                                            <td class="v-middle  media-middle text-center">
                                                                <img width="50px" height="40px" class="thumb-sm avatar"
                                                                     src="{{mymodel.image || 'img/userNopic.jpg'}}">
                                                            </td>
                                                            <td class="v-middle  media-middle text-center">
                                                                {{ mymodel.firstname + " " + mymodel.lastname|| 'خالی'
                                                                }}
                                                            </td>
                                                            <td class="v-middle  media-middle text-center">
                                                                {{ mymodel.studentcode || 'خالی'}}
                                                            </td>
                                                            <td class="v-middle  media-middle text-center"
                                                                ng-show="isPodemany">پودمان
                                                                {{mymodel.poodemaniType}}
                                                            </td>
                                                            <td class="v-middle  media-middle text-center"
                                                                ng-show="!isTosify">
                                                                <p ng-show="mymodel.value"> {{mymodel.value}} </p>
                                                                <p ng-show="!mymodel.value"> - </p>
                                                            </td>
                                                            <td class="v-middle  media-middle text-center"
                                                                ng-show="isTosify">
                                                                {{returnTosifyNomre(mymodel.value)}}
                                                            </td>
                                                            <td class="v-middle  media-middle text-center"
                                                                ng-show="isPodemany">
                                                                {{mymodel.value2}}
                                                            </td>
                                                            <td class="v-middle  media-middle text-center">
                                                                <button class="btn btn-sm btn-info"
                                                                        data-target="#myModal"
                                                                        ng-click="selectStu(mymodel.index)">
                                                                    <i class="icon-info"></i>&nbsp;امکانات
                                                                </button>
                                                            </td>
                                                        </tr>
                                                        </tbody>
                                                    </table>
                                                </table>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <div class="modal fade" id="myModal" role="dialog" ng-keydown="key($event)" tabindex="0">

            <div class="modal-dialog">

                <!-- Modal content-->
                <div class="modal-content">
                    <div class="modal-header">
                        <button type="button" class="close"
                                data-dismiss="modal">&times;
                        </button>
                        <h4 class="modal-title">
                            <img src="{{this_st_img || 'img/userNopic.jpg'}}" class="thumb-sm avatar"> {{this_st_name}}
                            / امتیاز فعلی :
                            ( {{this_st_pointValue.Amount_Owed || '0'}} )
                        </h4>
                    </div>
                    <div class="modal-body">
                        <div>
                            <div class="row">
                                <div class="col-xs-12 col-sm-12 col-md-12 col-lg-12">
                                    <div class="panel-body">
                                        <div class="alert alert-danger" ng-show="errText()">
                                            <i class="icon-info"></i> &nbsp; <strong> {{errText()}}&nbsp;</strong>را
                                            مشخص
                                            نمایید .
                                        </div>
                                        <div class="col-xs-12 col-sm-12 col-md-12 col-lg-12">
                                            <label class="col-xs-4 col-sm-3 col-md-3 col-lg-3 control-label"
                                                   style="margin-top: 8px;">درج نمره:</label>
                                            <div class="col-xs-8 col-sm-9 col-md-9 col-lg-9">
                                                <div ng-show="(isPodemany) && !(isTosify)">
                                                    <select tooltip="شماره پودمان"
                                                            ng-model="ss_tosifi_type"
                                                            ng-options="tos.value as tos.name for tos in arrPodeman "
                                                            class="form-control">
                                                        <option ng-disabled="true" ng-selected="false" value="">
                                                            پودمان مورد نظر
                                                            را انتخاب
                                                            نمایید.
                                                        </option>

                                                    </select>
                                                    <br>
                                                </div>
                                                <div class="input-group">
                                                    <!--نمره عادی-->
                                                    <input placeholder="نمره دانش آموز...."
                                                           class="form-control text-sm" ng-model="ss_nomre"
                                                           ng-show="!(isPodemany) && !(isTosify)"
                                                           oninput="javascript:
                                                                                                                     if (this.value > 20) this.value = this.value.slice(0, 0);
                                                                                                                   if (this.value.length > 2) this.value = this.value.slice(0, this.maxLength);"
                                                           type="text">
                                                    <!--نمره پودمانی-->
                                                    <div class="row" ng-show="(isPodemany) && !(isTosify)">
                                                        <div class="col-xs-12 col-sm-7 col-md-7 col-lg-7">
                                                            <input placeholder="شایستگی"
                                                                   class="form-control text-sm"
                                                                   ng-model="ss_podeman_1"
                                                                   oninput="javascript:
                                                           if (this.value > 20) this.value = this.value.slice(0, 0);
                                                           if (this.value.length > 2) this.value = this.value.slice(0, this.maxLength);"
                                                                   type="text">
                                                        </div>
                                                        <div class="col-xs-12 col-sm-5 col-md-5 col-lg-5">
                                                            <input placeholder="مستمر" maxlength="1"
                                                                   class="form-control text-sm"
                                                                   ng-model="ss_podeman_2"
                                                                   oninput="javascript:
                                                           if (this.value > 20) this.value = this.value.slice(0, 0);
                                                           if (this.value.length > 2) this.value = this.value.slice(0, this.maxLength);"
                                                                   type="text">
                                                        </div>
                                                    </div>
                                                    <!--نمره توصیفی-->
                                                    <select tooltip="نمره دانش آموز"
                                                            ng-show="!(isPodemany) && (isTosify)"
                                                            ng-model="ss_tosifi_nomre"
                                                            ng-options="tos.value as tos.name for tos in arrTosify "
                                                            class="form-control">
                                                        <option ng-disabled="true" ng-selected="false" value="">
                                                            نمره دانش آموز
                                                            را انتخاب
                                                            نمایید.
                                                        </option>

                                                    </select>
                                                    <span ng-show="!edit_score" class="input-group-btn"><a
                                                            style="height: 34px;"
                                                            tooltip="تایید" ng-click="insertScore()"
                                                            class="btn btn-success no-border"><i
                                                            class="glyphicon glyphicon-ok"></i></a></span>
                                                    <span ng-show="edit_score" class="input-group-btn"><a
                                                            style="height: 34px;"
                                                            tooltip="ویرایش" ng-click="ScoreUpdate()"
                                                            class="btn btn-success  no-border"><i
                                                            class="icon-pencil"></i></a></span>
                                                    <span ng-show="edit_score" class="input-group-btn"><a
                                                            style="height: 34px;" ng-click="ScoreDelete()"
                                                            tooltip="حذف"
                                                            class="btn btn-danger  no-border"><i
                                                            class="icon-trash"></i></a></span>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="col-xs-12 col-sm-6 col-md-6 col-lg-6">
                                        <div class="panel-body">
                                            <label class="col-xs-6 col-sm-6 col-md-6 col-lg-6 control-label"
                                                   style="margin-top: 8px;">حاضر/غایب:</label>
                                            <div class="col-xs-6 col-sm-6 col-md-6 col-lg-6">
                                                <div style="margin-top: 5px">
                                                    <input tooltip="وضعیت حضور در کلاس دانش آموز" id="toggle"
                                                           ng-click="attendanceInsert(ss_geibat)"
                                                           class="checkStyle"
                                                           ng-model="ss_geibat" type="checkbox"/>
                                                    <label for="toggle" class="labelClass"/>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="line line-dashed  line-lg pull-in"></div>
                                    <div class="panel-body">
                                        <details>
                                            <summary style="font-size: 14px;">
                                                امکانات بیشتر
                                            </summary>
                                            <div class="col-xs-12 col-sm-12 col-md-12 col-lg-12">
                                                <div class="panel-body">
                                                    <label class="col-xs-4 col-sm-3 col-md-3 col-lg-3 control-label"
                                                           style="margin-top: 8px;">امتیاز :</label>
                                                    <div class="col-xs-8 col-sm-9 col-md-9 col-lg-9">
                                                        <div class="input-group">
                                                            <select tooltip="امتیاز دانش آموز"
                                                                    ng-model="ss_point"
                                                                    ng-options="point.pointid as point.name + ' ('+point.barem+')' for point in teacherPoints "
                                                                    class="form-control">
                                                                <option ng-disabled="true" value="">
                                                                    امتیاز دانش آموز
                                                                    را انتخاب
                                                                    نمایید.
                                                                </option>
                                                            </select>
                                                            <span ng-show="!edit_point" class="input-group-btn"><a
                                                                    style="height: 34px;" ng-click="pointsInsert()"
                                                                    tooltip="تایید"
                                                                    class="btn btn-success  no-border"><i
                                                                    class="glyphicon glyphicon-ok"></i></a></span>
                                                            <span ng-show="edit_point" class="input-group-btn"><a
                                                                    style="height: 34px;" ng-click="pointsUpdate()"
                                                                    tooltip="ویرایش"
                                                                    class="btn btn-success  no-border"><i
                                                                    class="icon-pencil"></i></a></span>
                                                            <span ng-show="edit_point" class="input-group-btn"><a
                                                                    style="height: 34px;" ng-click="pointDelete()"
                                                                    tooltip="حذف"
                                                                    class="btn btn-danger  no-border"><i
                                                                    class="icon-trash"></i></a></span>
                                                        </div>
                                                        <div ng-show="ss_point">
                                                            <br>
                                                            <textarea rows="5"
                                                                      style="width:100%;height:auto; "
                                                                      ng-model="ss_note"
                                                                      ui-validate=""
                                                                      placeholder="یادداشت برای امتیاز..."
                                                                      type="text"></textarea>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                            <div class="col-xs-12 col-sm-12 col-md-12 col-lg-12">
                                                <div class="panel-body">
                                                    <label class="col-xs-4 col-sm-3 col-md-3 col-lg-3 control-label"
                                                           style="margin-top: 8px;">انضباط :</label>
                                                    <div class="col-xs-8 col-sm-9 col-md-9 col-lg-9">
                                                        <div class="input-group">
                                                            <select tooltip="درج انضباط برای دانش آموز"
                                                                    ng-model="ss_enzebat"
                                                                    ng-options="item.disciplinetypeid as item.name for item in enzStDetial "
                                                                    class="form-control">
                                                                <option ng-disabled="true" ng-selected="false" value="">
                                                                    نوع انضباط
                                                                    را انتخاب
                                                                    نمایید.
                                                                </option>

                                                            </select>
                                                            <span ng-show="!edit_enz" class="input-group-btn"><a
                                                                    style="height: 34px;" ng-click="DisciplineInsert()"
                                                                    tooltip="تایید"
                                                                    class="btn btn-success  no-border"><i
                                                                    class="glyphicon glyphicon-ok"></i></a></span>
                                                            <span ng-show="edit_enz" class="input-group-btn"><a
                                                                    style="height: 34px;" ng-click="DisciplineUpdate()"
                                                                    tooltip="ویرایش"
                                                                    class="btn btn-success  no-border"><i
                                                                    class="icon-pencil"></i></a></span>
                                                            <span ng-show="edit_enz" class="input-group-btn"><a
                                                                    style="height: 34px;" ng-click="DisciplineDelete()"
                                                                    tooltip="حذف"
                                                                    class="btn btn-danger  no-border"><i
                                                                    class="icon-trash"></i></a></span>
                                                        </div>

                                                    </div>
                                                </div>
                                            </div>
                                            <div class="col-xs-12 col-sm-12 col-md-12 col-lg-12"
                                                 ng-show="gifts.length != 0">
                                                <div class="panel-body">
                                                    <label class="col-xs-4 col-sm-3 col-md-3 col-lg-3 control-label"
                                                           style="margin-top: 8px;">جایزه :</label>
                                                    <div class="col-xs-8 col-sm-9 col-md-9 col-lg-9">
                                                        <div class="input-group">
                                                            <select tooltip="جوایز قابل ارایه برای این دانش آموز"
                                                                    ng-model="ss_gifts"
                                                                    ng-options="gf.giftpoint_id as gf.name for gf in gifts "
                                                                    class="form-control">
                                                                <option ng-disabled="true" ng-selected="false" value="">
                                                                    جوایز قابل ارایه برای این دانش آموز
                                                                </option>

                                                            </select>
                                                            <span ng-show="true" class="input-group-btn"><a
                                                                    style="height: 34px;" ng-click="giftInsert()"
                                                                    tooltip="تایید"
                                                                    class="btn btn-success  no-border"><i
                                                                    class="glyphicon glyphicon-ok"></i></a></span>
                                                            <span ng-show="false" class="input-group-btn"><a
                                                                    style="height: 34px;" ng-click="DisciplineUpdate()"
                                                                    tooltip="ویرایش"
                                                                    class="btn btn-success  no-border"><i
                                                                    class="icon-pencil"></i></a></span>
                                                            <span ng-show="false" class="input-group-btn"><a
                                                                    style="height: 34px;" ng-click="DisciplineDelete()"
                                                                    tooltip="حذف"
                                                                    class="btn btn-danger  no-border"><i
                                                                    class="icon-trash"></i></a></span>
                                                        </div>

                                                    </div>
                                                </div>
                                            </div>
                                        </details>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="modal-footer">
                        <div style="width: 100%;">
                            <br>
                            <div class="row">
                                <div class="col-xs-4 col-sm-4 col-md-4 col-lg-4">
                                    <button style="width: 100%;" type="button" class="btn btn-addon , btn btn-info"
                                            ng-click="nextStudent()" ng-disabled="next"><i class="icon-arrow-right"></i>
                                        &nbsp;بعدی
                                    </button>
                                </div>
                                <div class="col-xs-4 col-sm-4 col-md-4 col-lg-4">
                                    <button data-dismiss="modal"
                                            style="width: 100%;"
                                            type="submit" href="index.html"
                                            class="btn btn-default">
                                        <span> لغو </span></button>
                                </div>
                                <div class="col-xs-4 col-sm-4 col-md-4 col-lg-4">
                                    <button style="width: 100%" type="button" class="btn btn-addon , btn btn-danger"
                                            ng-click="prvStudent()" ng-disabled="prv"><i class="icon-arrow-left"></i>
                                        &nbsp;قبلی
                                    </button>
                                </div>

                            </div>
                            <br>
                        </div>
                    </div>
                    <div id="snackbar">{{snackText}}&nbsp;<span>با موفقیت ثبت گردید.</span></div>
                </div>
            </div>
        </div>
    </div>
    <div class="modal fade" id="history" role="dialog">
        <div class="modal-dialog">

            <!-- Modal content-->
            <div class="modal-content">
                <div class="modal-header">
                    <button type="button" class="close"
                            data-dismiss="modal">&times;
                    </button>
                    <h4 class="modal-title">
                        <img src="img/icon/jalase.png" class="icnSize">
                        مشاهده جلسات پیشین
                    </h4>
                </div>
                <div class="modal-body">
                    <div>
                        <div class="row">
                            <div class="col-xs-12 col-sm-12 col-md-12 col-lg-12">
                                <div class="panel-body">
                                    <div class="alert alert-danger" ng-show="errText()">
                                        <i class="icon-info"></i> &nbsp; <strong> {{errText()}}&nbsp;</strong>را
                                        مشخص
                                        نمایید .
                                    </div>
                                    <div>
                                        <table class="table table-striped" id="mytable2">
                                            <thead>
                                            <tr>
                                                <th scope="col">#</th>
                                                <th scope="col" class="v-middle  media-middle text-center ">عنوان جلسه
                                                </th>
                                                <th scope="col" class="v-middle  media-middle text-center ">تاریخ</th>
                                                <th scope="col" class="v-middle  media-middle text-center ">جلسه</th>
                                            </tr>
                                            </thead>
                                            <tbody>
                                            <tr ng-repeat="lst in lessonTeachers">
                                                <td scope="row" class="v-middle  media-middle text-center">
                                                    <p ng-show="!lst.sessionid == sessionId">
                                                        {{lst.sessionid}}</p>
                                                    <p ng-show="lst.sessionid == sessionId"
                                                       style="color: green">
                                                        {{lst.sessionid}}</p>
                                                </td>
                                                <td class="v-middle  media-middle text-center">
                                                    <p ng-show="!lst.sessionid == sessionId">{{ lst.title}}</p>
                                                    <p ng-show="lst.sessionid == sessionId"
                                                       style="color: green">
                                                        {{lst.title}}</p>
                                                </td>
                                                <td class="v-middle  media-middle text-center">
                                                    <p ng-show="!lst.sessionid == sessionId">{{
                                                        returnDate(lst.createdAt)}}</p>
                                                    <p ng-show="lst.sessionid == sessionId"
                                                       style="color: green">
                                                        {{returnDate(lst.createdAt)}}</p>
                                                </td>
                                                <td class="v-middle  media-middle text-center">
                                                    <button class="btn btn-sm btn-info"
                                                            ng-click="gotoSession(lst.weeklyscheduleid , lst.date)"
                                                            ng-show="!lst.sessionid == sessionId"
                                                    >
                                                        <i class="icon-info"></i>&nbsp;مشاهده
                                                    </button>
                                                    <h6 style="color: green"
                                                        ng-show="lst.sessionid == sessionId">
                                                        جلسه جاری
                                                    </h6>
                                                </td>
                                            </tr>
                                            </tbody>
                                        </table>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="modal-footer">
                    <div style="width: 100%;margin-right: 20px;">
                        <br>
                        <div class="row">
                            <div class="col-xs-6 col-sm-6 col-md-6 col-lg-4" style="float: right;color: white">
                                <button ng-click="insert_jlse()"

                                        style="width: 105%;background-color: #0F9E5E;"
                                        type="submit" class="btn btn-light">
                                    <i class=" icon-plus"></i> &nbsp; <span
                                        style="color: white"> تایید   </span>
                                </button>
                            </div>

                            <div class="col-xs-4 col-sm-2 col-md-4 col-lg-2"
                                 style="float: right;margin-right: 20px;color: white">
                                <button data-dismiss="modal"
                                        style="width: 100%;background-color: #6c757d"
                                        type="submit" href="index.html"
                                        class="btn btn-light">
                                    <i
                                            class="icon-close"></i>
                                    &nbsp;
                                    <span> لغو </span></button>
                            </div>

                        </div>
                        <br>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
